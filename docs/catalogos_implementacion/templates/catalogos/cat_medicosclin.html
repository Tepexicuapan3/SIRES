{% extends './menu.html' %}
{% block title %}MÉDICOS CLÍNICAS{% endblock %}
{% block customCSS %}
{% endblock %}
<style>
    .fa-bars,
    .fa-xmark {
        transition: transform 0.5s ease;
        /* Ajusta el tiempo de la transición aquí */
    }

    /* Pantallas grandes */
    @media (min-width: 576px) {
        .d-block {
            display: block !important;
        }

        .d-sm-none {
            display: none !important;
        }
    }

    /* Pantallas pequeñas */
    @media (max-width: 575.98px) {
        .d-block {
            display: none !important;
        }

        .d-sm-none {
            display: block !important;
        }
    }
</style>
{% block contenido %}
{% include 'mensajes.html' %}
    <div class="page-header pt-3 stc">
        <h3 id="nom_rep">MÉDICOS CLÍNICAS</h3>
    </div>
    <p class="lead stc" style="font-size: 75%;">
        Este catálogo está enfocado en gestionar y organizar los médicos de las clínicas internas pertenecientes al sistema de salud.
    </p>
    <hr>
    <div class="container py-4 stc">
        <div class="mb-4 d-flex justify-content-end p-0 stc">
            <a href="{{url_for('catalogos.cat_medicosespechosp')}}" class="btn btn-primary btn-sm btn-rounded" title="Ir al Catálogo de Médicos Especialistas">
                <span class="d-none d-sm-inline">Médico Especialista</span>
                <i class="fa-solid fa-arrow-right"></i>
            </a>
        </div> 
        <div class="row justify-content-center">
            <div class="col-lg-12">
                <!-- Card -->
                <div class="card text-bg-secondary bg-opacity-10" style="font-size: small;">
                    <div class="card-header text-dark">
                        Realice las acciones necesarias en el siguiente catálogo. 
                    </div>
                    <!-- Card body -->
                    <div class="card-body">
                        <!-- Form inputs within a row -->
                        <form name="formulario" id="miFormulario" action="{{url_for('catalogos.cat_medicosclin')}}" method="post">
                            {{ form.hidden_tag() }}
                            <div class="new-registro" style="display: none;">
                                <div class="row mb-4">
                                    <div class="col-1">
                                        <div class="form-outline mdb-input">
                                            {{ form.txtId(class="form-control form-control-sm input-form input_readonly", id="txtId") }}
                                            <label class="form-label" for="txtId">{{ form.txtId.label }}</label>
                                        </div>
                                    </div>
                                </div>
                                <br>
                            </div>
                            <div class="row mb-4">
                                <div class="col-5">
                                    <div class="form-outline mdb-input">
                                        {{ form.txtUsuario(class="form-control form-control-sm input-form", id="txtUsuario", autocomplete="off", list="usuariosLista") }}
                                        <label class="form-label" for="txtUsuario">{{ form.txtUsuario.label }}</label>
                                        <datalist id="usuariosLista"></datalist>
                                    </div>
                                </div>
                                <div class="col-2">
                                    <div class="form-outline mdb-input">
                                        {{ form.txtSexo(class="form-control form-control-sm input-form", id="txtSexo") }}
                                        <label class="form-label" for="txtSexo">{{ form.txtSexo.label }}</label>
                                    </div>
                                </div>
                                <div class="col-3">
                                    <div class="form-outline mdb-input">
                                        {{ form.txtFchNac(class="form-control form-control-sm input-form", type="date", id="txtFchNac") }}
                                        <label class="form-label" for="txtFchNac">{{ form.txtFchNac.label }}</label>
                                    </div>
                                </div>
                                <div class="col-2">
                                    <div class="form-outline mdb-input">
                                        {{ form.txtCedula(class="form-control form-control-sm input-form", id="txtCedula") }}
                                        <label class="form-label" for="txtCedula">{{ form.txtCedula.label }}</label>
                                    </div>
                                </div>
                            </div>
                            <br>
                            <div class="row mb-5 justify-content-center">
                                <div class="col-5">
                                    <div class="form-outline mdb-input">
                                        {{ form.txtEscuela(class="form-control form-control-sm input-form", id="txtEscuela", autocomplete="off", list="escuelasLista") }}
                                        <label class="form-label" for="txtEscuela">{{ form.txtEscuela.label }}</label>
                                        <datalist id="escuelasLista"></datalist>                            
                                    </div>
                                </div>
                                <div class="col-4">
                                    <div class="form-outline mdb-input">
                                        {{ form.txtEspecialidad(id="txtEspecialidad", class="form-control form-control-sm input-form", list="especialidadesLista", autocomplete="off") }}
                                        <label class="form-label" for="txtEspecialidad">{{ form.txtEspecialidad.label }}</label>
                                        <datalist id="especialidadesLista"></datalist>
                                    </div>
                                </div>
                                <div class="col-3">
                                    <div class="form-outline mdb-input">
                                        {{ form.txtServiciosClin(id="txtServiciosClin", class="form-control form-control-sm input-form", list="serviciosLista", autocomplete="off") }}
                                        <label class="form-label" for="txtServiciosClin">{{ form.txtServiciosClin.label }}</label>
                                        <datalist id="serviciosLista"></datalist>
                                    </div>
                                </div>
                            </div>
                            <div class="row mb-5 justify-content-start">
                                <div class="col-8">
                                    <div class="form-outline mdb-input">
                                        {{ form.txtDireccion(class="form-control form-control-sm input-form", id="txtDireccion", autocomplete="off") }}
                                        <label class="form-label" for="txtDireccion">{{ form.txtDireccion.label }}</label>
                                    </div>
                                </div>
                                <div class="col-4">
                                    <div class="form-outline mdb-input">
                                        {{ form.txtClinica(class="form-control form-control-sm input-form", id="txtClinica", autocomplete="off", list="clinicasLista") }}
                                        <label class="form-label" for="txtClinica">{{ form.txtClinica.label }}</label>
                                        <datalist id="clinicasLista"></datalist>
                                    </div>
                                </div>
                            </div>
                            <div class="row mb-5 justify-content-center">
                                <div class="col-3">
                                    <div class="form-outline mdb-input">
                                        {{ form.txtConsultorio(class="form-control form-control-sm input-form", id="txtConsultorio", autocomplete="off", list="consultoriosLista") }}
                                        <label class="form-label" for="txtConsultorio">{{ form.txtConsultorio.label }}</label>
                                        <datalist id="consultoriosLista"></datalist>
                                    </div>
                                </div>
                                <div class="col-2">
                                    <div class="form-outline mdb-input">
                                        {{ form.txtHrIni(class="form-control form-control-sm input-form hora ph-required", id="txtHrIni", placeholder="HH:MM", minlength="5", pattern="([01]?[0-9]|2[0-3]):[0-5][0-9]") }}
                                        <label class="form-label" for="txtHrIni">{{ form.txtHrIni.label }}</label>
                                    </div>
                                </div>
                                <div class="col-2">
                                    <div class="form-outline mdb-input">
                                        {{ form.txtHrTerm(class="form-control form-control-sm input-form hora ph-required", id="txtHrTerm", placeholder="HH:MM", minlength="5", pattern="([01]?[0-9]|2[0-3]):[0-5][0-9]") }}
                                        <label class="form-label" for="txtHrTerm">{{ form.txtHrTerm.label }}</label>
                                    </div>
                                </div>
                                <div class="col-2">
                                    <div class="form-outline mdb-input">
                                        {{ form.txtIntervConsul(class="form-control form-control-sm input-form", id="txtIntervConsul") }}
                                        <label class="form-label" for="txtIntervConsul">{{ form.txtIntervConsul.label }}</label>
                                    </div>
                                </div>
                                <div class="col-3">
                                    <div class="form-outline mdb-input">
                                        {{ form.txtDias(class="form-control form-control-sm input-form", id="txtDias") }}
                                        <label class="form-label" for="txtDias">{{ form.txtDias.label }}</label>
                                    </div>
                                </div>                             
                            </div>
                            <div class="row mb-3">
                                <div class="col-3">
                                    <div class="form-outline mdb-input">
                                        {{ form.txtAmbosTurnos(class="form-control form-control-sm input-form", id="txtAmbosTurnos") }}
                                        <label class="form-label" for="txtAmbosTurnos">{{ form.txtAmbosTurnos.label }}</label>
                                    </div>
                                </div>
                                <div class="row mb-3 justify-content-end" id="extraFieldsRow" style="display: none;">
                                    <div class="col-3">
                                        <div class="form-outline mdb-input">
                                            {{ form.txtConsultorio2(class="form-control form-control-sm input-form", id="txtConsultorio2", autocomplete="off", list="consultorios2Lista", type="hidden") }}
                                            <label class="form-label" for="txtConsultorio2">{{ form.txtConsultorio2.label }}</label>
                                            <datalist id="consultorios2Lista"></datalist>
                                        </div>
                                    </div>
                                    <div class="col-2">
                                        <div class="form-outline mdb-input">
                                            {{ form.txtHrInic2(class="form-control form-control-sm input-form hora ph-required", id="txtHrInic2", type="hidden", placeholder="HH:MM", minlength="5", pattern="([01]?[0-9]|2[0-3]):[0-5][0-9]") }}
                                            <label class="form-label" for="txtHrInic2">{{ form.txtHrInic2.label }}</label>
                                        </div>
                                    </div>
                                    <div class="col-2">
                                        <div class="form-outline mdb-input">
                                            {{ form.txtHrTerm2(class="form-control form-control-sm input-form hora ph-required", id="txtHrTerm2", type="hidden", placeholder="HH:MM", minlength="5", pattern="([01]?[0-9]|2[0-3]):[0-5][0-9]") }}
                                            <label class="form-label" for="txtHrTerm2">{{ form.txtHrTerm2.label }}</label>
                                        </div>
                                    </div>
                                    <div class="col-2">
                                        <div class="form-outline mdb-input">
                                            {{ form.txtIntervConsul2(class="form-control form-control-sm input-form", id="txtIntervConsul2", type="hidden") }}
                                            <label class="form-label" for="txtIntervConsul2">{{ form.txtIntervConsul2.label }}</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            {{ form.opcion(id="opcion", class="input-form") }} 
                        </form>                        
                        <br>
                        <div class="row mb-1">
                            <div class="col-md-12 d-flex justify-content-center">
                                <table>
                                    <tr>
                                        <th class="registro">
                                            <button name="boton" type="button" onclick="enviarFormulario(153)" title="Registrar" class="btn btn-success btn-rounded">
                                                <i class="bi bi-upload"></i>
                                                <span class="d-none d-sm-inline">Registrar</span>
                                            </button>
                                        </th>
                                        <th class="modificacion" style="display: none; margin-right: 2.5px;">
                                            <button name="boton" type="button" onclick="enviarFormulario(154)" title="Modificar" class="btn btn-warning btn-rounded">
                                                <i class="bi bi-pencil-square"></i>
                                                <span class="d-none d-sm-inline">Modificar</span>
                                            </button>
                                            <button name="boton" type="button" onclick="enviarFormulario(155)" title="Cambiar Estatus" class="btn btn-info btn-rounded">
                                                <i class="bi bi-pencil-square"></i>
                                                <span class="d-none d-sm-inline">Desactivar</span>
                                            </button>
                                        </th>
                                        <th class="mod_estatus" style="display: none; margin-right: 2.5px;">
                                            <button name="boton" type="button" onclick="enviarFormulario(155)" title="Cambiar Estatus" class="btn btn-info btn-rounded">
                                                <i class="bi bi-pencil-square"></i>
                                                <span class="d-none d-sm-inline">Activar</span>
                                            </button>
                                        </th>
                                        <th>
                                            <button type="button" title="Limpiar" value="Limpiar" class="btn btn-dark btn-rounded" onclick="limpiarFormulario()">
                                                <i class="bi bi-backspace-reverse"></i>
                                                <span class="d-none d-sm-inline">Limpiar</span>
                                            </button>
                                        </th>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!--Input de Busqueda y boton imprimir-->
    <form name="formulario" id="formImpresion" action="{{url_for('catalogos.reporte_nuevo')}}" method="post">
        <div class="row d-flex justify-content-center p-3 stc">
            <div class="col-3"></div>
            <div class="col-3" style="text-align: center;">
                <div data-mdb-input-init class="form-outline">
                    <input type="text" id="busqueda" name="busqueda" class="form-control form-control-sm" style="background-color: white;"/>
                    <label class="form-label" for="busqueda">Buscar</label>
                </div>
            </div>
            <div class="col-4" style="text-align: left;">
                <!-- Agregar un campo oculto para el número de catálogo -->
                <input type="hidden" id="cat" name="cat" value="medicosclin">
                <button type="button" title="Imprimir" class="btn btn-primary btn-sm btn-rounded" onclick="imprimir()">
                    <i class="bi bi-printer-fill"></i>
                    <span class="d-none d-sm-inline">Imprimir</span>
                </button>
            </div>
        </div>
    </form>

    <!--Tabla-->
    <div class="row d-flex justify-content-center p-3 stc">
        <div class="text-center" style="position: relative; width: 90%;">
            <div class="table-responsive" style="height: 300px;">
                <!-- Contenido de la tabla aquí -->
                {% if medicsclin %}
                    <table id="titulo" class="table table-hover fonthead table-bordered table-sm" style="width: 100%; border-collapse: separate; border-spacing: 0;">
                        <thead class="table-dark">
                            <tr id="encabezado">
                            <th class="no-visible">REGISTRO</th>
                            <th class="visible">USUARIO</th>
                            <th class="visible">SEXO</th>
                            <th class="visible">FECHA NACIMIENTO</th>
                            <th class="visible">CÉDULA</th>
                            <th class="visible">ESCUELA</th>
                            <th class="visible">ESPECIALIDAD</th>
                            <th class="visible">SERVICIOS CLÍNICOS</th>
                            <th class="visible">DIRECCIÓN</th>
                            <th class="visible">CLÍNICA</th>
                            <th class="visible">CONSULTORIO</th>
                            <th class="visible">H. INICIO</th>
                            <th class="visible">H. TÉRMINO</th>
                            <th class="visible">INTERVALO</th>
                            <th class="no-visible"></th>
                            <th class="visible">DÍAS</th>
                            <th class="no-visible">AMBOS TURNOS1</th>
                            <th class="visible">AMBOS TURNOS</th>
                            <th class="visible">2.º CONSULTORIO</th>
                            <th class="visible">2.º H. INICIO</th>
                            <th class="visible">2.º H. TÉRMINO</th>
                            <th class="visible">2.º INTERVALO</th>
                            <th class="visible">ESTATUS</th>
                            </tr>
                        </thead>
                        <tbody id="datos" style="font-size: 80%;">
                            {% for medicoclin, sigls_esc, escuela, especialidad, serviciosclin, clinica, no_consult1, turno1, consultorio1, no_consult2, turno2, consultorio2, expediente, nombre, paterno, materno in medicsclin %}
                            <tr id="{{ medicoclin.id_medclin }}">
                                <td name="txtId" class="no-visible text-center input-form">{{ medicoclin.id_medclin }}</td>
                                <td name="txtUsuario" class="visible text-center input-form">{{ '{}: {} {} {}'.format (expediente, nombre, paterno, materno) }}</td>
                                <td name="txtSexo" class="no-visible texto-largo input-form">{{ medicoclin.sexo }}</td>
                                <td class="visible">
                                    {% if medicoclin.sexo == 'M' %}
                                        MASCULINO
                                    {% else %}
                                        FEMENINO
                                    {% endif %}
                                </td>
                                <td name="txtFchNac" class="visible texto-largo input-form">{{ medicoclin.fch_nac }}</td>
                                <td name="txtCedula" class="visible texto-largo input-form">{{ medicoclin.cedula }}</td>
                                <td name="txtEscuela" class="visible texto-largo input-form">{{'{}: {}'.format(sigls_esc, escuela) }}</td>
                                <td name="txtEspecialidad" class="visible texto-largo input-form">{{ especialidad }}</td>
                                <td name="txtServiciosClin" class="visible texto-largo input-form">{{ serviciosclin }}</td>
                                <td name="txtDireccion" class="visible texto-largo input-form">{{ medicoclin.direccion }}</td>
                                <td name="txtClinica" class="visible texto-largo input-form">{{ clinica }}</td>
                                <td name="txtConsultorio" class="visible texto-largo input-form">{{ '{}: {} ({})'.format(no_consult1, consultorio1, turno1) }}</td>
                                <td name="txtHrIni" class="visible texto-largo input-form">{{ medicoclin.hr_ini }}</td>
                                <td name="txtHrTerm" class="visible texto-largo input-form">{{ medicoclin.hr_term }}</td>
                                <td name="txtIntervConsul" class="visible texto-largo input-form">{{ medicoclin.interv_consul }}</td>
                                <td name="txtDias" class="no-visible texto-largo input-form">{{ medicoclin.dias }}</td>
                                <td class="visible">
                                    {% if medicoclin.dias == 'S' %}
                                        LUNES A VIERNES
                                    {% else %}
                                        FINES DE SEMANA
                                    {% endif %}
                                </td>
                                <td name="txtAmbosTurnos" class="no-visible texto-largo input-form">{{ medicoclin.ambos_turn }}</td>
                                <td class="visible">
                                    {% if medicoclin.ambos_turn == 'S' %}
                                        SÍ
                                    {% else %}
                                        NO
                                    {% endif %}
                                </td>
                                {% if medicoclin.id_consult2 %}
                                    <td name="txtConsultorio2" class="visible texto-largo input-form">
                                        {{ '{}: {} ({})'.format(no_consult2, consultorio2, turno2) }}
                                    </td>
                                {% else %}
                                    <td name="txtConsultorio2" class="visible texto-largo input-form">None</td>
                                {% endif %}                                
                                <td name="txtHrInic2" class="visible texto-largo input-form">{{ medicoclin.hr_ini2 }}</td>
                                <td name="txtHrTerm2" class="visible texto-largo input-form">{{ medicoclin.hr_term2 }}</td>
                                <td name="txtIntervConsul2" class="visible texto-largo input-form">{{ medicoclin.interv_consul2 }}</td>
                                <td name="txtEstatus" class="visible texto-largo {% if medicoclin.est_medclin == 'A' %}table-success{% elif medicoclin.est_medclin == 'B' %}table-danger{% endif %}">
                                    {% if medicoclin.est_medclin == 'A' %}
                                        ACTIVO
                                    {% elif medicoclin.est_medclin == 'B' %}
                                        INACTIVO
                                    {% endif %}
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                {% else %}
                    <center>
                        <h3 class="text-center metro" style="color:#970000;">
                            <b> NO <span style="padding-left:40px;"> </span> HAY <span style="padding-left:40px;"> </span> REGISTROS </b>
                        </h3>
                    </center>
                {% endif %}
            </div>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script>
        $(document).ready(function() {
            $('#txtUsuario').on('input', function() {
                var query = $(this).val(); // Obtiene el valor ingresado
                buscarUsuario(query);
            });
        });

        function buscarUsuario(query) {
            $.ajax({
                url: "{{ url_for('catalogos.buscar_usuario') }}",
                type: "GET",
                data: { query: query },
                dataType: "json",
                success: function(data) {
                    var datalist = $('#usuariosLista');
                    datalist.empty();  // Limpia las opciones actuales

                    // Almacena los resultados en el campo de entrada para su posterior uso
                    $('#txtUsuario').data('usuarios', data);
                    
                    // Llena el datalist con las opciones encontradas
                    data.forEach(function(usuario) {
                        var option = $('<option></option>').val(usuario.usuario);
                        datalist.append(option);
                    });

                    
                }
            });
        }


        $(document).ready(function() {
            $('#txtEscuela').on('input', function() {
                var query = $(this).val(); // Obtiene el valor ingresado
                buscarEscuela(query);
            });
        });

        function buscarEscuela(query) {
            $.ajax({
                url: "{{ url_for('catalogos.buscar_escuela') }}",
                type: "GET",
                data: { query: query },
                dataType: "json",
                success: function(data) {
                    var datalist = $('#escuelasLista');
                    datalist.empty();  // Limpia las opciones actuales

                    // Almacena los resultados en el campo de entrada para su posterior uso
                    $('#txtEscuela').data('escuela', data);
                    
                    // Llena el datalist con las opciones encontradas
                    data.forEach(function(escuela) {
                        var option = $('<option></option>').val(escuela.escuela);
                        datalist.append(option);
                    });                    
                }
            });
        }

        $(document).ready(function() {
            $('#txtEspecialidad').on('input', function() {
                var query = $(this).val(); // Obtiene el valor ingresado
                buscarEspecialidad(query);
            });
        });

        function buscarEspecialidad(query) {
            $.ajax({
                url: "{{ url_for('catalogos.buscar_especialidad') }}",
                type: "GET",
                data: { query: query },
                dataType: "json",
                success: function(data) {
                    var datalist = $('#especialidadesLista');
                    datalist.empty();  // Limpia las opciones actuales

                    // Almacena los resultados en el campo de entrada para su posterior uso
                    $('#txtEspecialidad').data('especialidades', data);
                    
                    // Llena el datalist con las opciones encontradas
                    data.forEach(function(especialidad) {
                        var option = $('<option></option>').val(especialidad.especialidad);
                        datalist.append(option);
                    });                   
                }
            });
        }

        $(document).ready(function() {
            $('#txtServiciosClin').on('input', function() {
                var query = $(this).val(); // Obtiene el valor ingresado
                buscarServicio(query);
            });
        });

        function buscarServicio(query) {
            $.ajax({
                url: "{{ url_for('catalogos.buscar_servicio') }}",
                type: "GET",
                data: { query: query },
                dataType: "json",
                success: function(data) {
                    var datalist = $('#serviciosLista');
                    datalist.empty();  // Limpia las opciones actuales

                    // Almacena los resultados en el campo de entrada para su posterior uso
                    $('#txtServiciosClin').data('servicios', data);
                    
                    // Llena el datalist con las opciones encontradas
                    data.forEach(function(servicio) {
                        var option = $('<option></option>').val(servicio.servicio);
                        datalist.append(option);
                    });                    
                }
            });
        }

        $(document).ready(function() {
            $('#txtClinica').on('input', function() {
                var query = $(this).val(); // Obtiene el valor ingresado
                buscarClinica(query);
            });
        });

        function buscarClinica(query) {
            $.ajax({
                url: "{{ url_for('catalogos.buscar_clinica') }}",
                type: "GET",
                data: { query: query },
                dataType: "json",
                success: function(data) {
                    var datalist = $('#clinicasLista');
                    datalist.empty();  // Limpia las opciones actuales

                    // Almacena los resultados en el campo de entrada para su posterior uso
                    $('#txtClinica').data('clinicas', data);
                    
                    // Llena el datalist con las opciones encontradas
                    data.forEach(function(clinica) {
                        var option = $('<option></option>').val(clinica.clinica);
                        datalist.append(option);
                    });                    
                }
            });
        }

        $(document).ready(function() {
            $('#txtConsultorio').on('input', function() {
                var query = $(this).val(); // Obtiene el valor ingresado
                buscarConsultorio(query);
            });
        });

        function buscarConsultorio(query) {
            var clinica = $('#txtClinica').val();  // Declaración de la variable
            $.ajax({
                url: "{{ url_for('catalogos.buscar_consultorio') }}",
                type: "GET",
                data: { query: query, clinica: clinica },
                dataType: "json",
                success: function(data) {
                    var datalist = $('#consultoriosLista');
                    datalist.empty();  // Limpia las opciones actuales

                    // Almacena los resultados en el campo de entrada para su posterior uso
                    $('#txtConsultorio').data('consultorios', data);
                    
                    // Llena el datalist con las opciones encontradas
                    data.forEach(function(consultorio) {
                        var option = $('<option></option>').val(consultorio.consultorio);
                        datalist.append(option);
                    });                    
                }
            });
        }

        $(document).ready(function() {
            $('#txtConsultorio2').on('input', function() {
                var query = $(this).val(); // Obtiene el valor ingresado
                buscarConsultorio2(query);
            });
        });

        function buscarConsultorio2(query) {
            var clinica = $('#txtClinica').val();  // Declaración de la variable
            $.ajax({
                url: "{{ url_for('catalogos.buscar_consultorio') }}",
                type: "GET",
                data: { query: query, clinica: clinica },
                dataType: "json",
                success: function(data) {
                    var datalist = $('#consultorios2Lista');
                    datalist.empty();  // Limpia las opciones actuales

                    // Almacena los resultados en el campo de entrada para su posterior uso
                    $('#txtConsultorio2').data('consultorios', data);
                    
                    // Llena el datalist con las opciones encontradas
                    data.forEach(function(consultorio) {
                        var option = $('<option></option>').val(consultorio.consultorio);
                        datalist.append(option);
                    });
                }
            });
        }
    </script>
    <script>     
        document.addEventListener("DOMContentLoaded", function() {
            const txtAmbosTurnos = document.getElementById('txtAmbosTurnos');
            const extraFieldsRow = document.getElementById('extraFieldsRow');
            const tbody = document.getElementById('datos');

            function toggleExtraFields(condition) {
                const inputs = extraFieldsRow.getElementsByTagName('input');
                
                if (condition) {
                    // Mostrar la fila extra
                    extraFieldsRow.style.display = 'flex';
                    
                    // Cambiar el tipo de todos los inputs a 'text'
                    Array.prototype.forEach.call(inputs, function(input) {
                        input.type = 'text';
                    });
                } else {
                    // Ocultar la fila extra
                    extraFieldsRow.style.display = 'none';
                    
                    // Cambiar el tipo de todos los inputs a 'hidden'
                    Array.prototype.forEach.call(inputs, function(input) {
                        input.type = 'hidden';
                        input.value = ''; // Limpiar el valor del input cuando se oculta
                    });
                }
            }

            // Evento cuando cambia el valor del input txtAmbosTurnos
            txtAmbosTurnos.addEventListener('input', function() {
                toggleExtraFields(txtAmbosTurnos.value.trim().toUpperCase() === 'S');
            });

            // Evento cuando se hace click en el tbody
            tbody.addEventListener('click', function(event) {
                // Obtener el <td> que tiene el valor de ambos_turn (el <td> con name="txtAmbosTurnos")
                const targetRow = event.target.closest('tr');  // Identificar la fila <tr> donde se hizo clic
                const ambosTurnosTd = targetRow.querySelector('td[name="txtAmbosTurnos"]'); // Seleccionar el <td> correspondiente

                if (ambosTurnosTd) {
                    const ambosTurnosValue = ambosTurnosTd.textContent.trim().toUpperCase();

                    // Aplicar la lógica de mostrar/ocultar según el valor del <td>
                    toggleExtraFields(ambosTurnosValue === 'S');
                }
            });
        });
    </script>
    <script>
        // Función para limpiar el campo si se ingresan números
        /*function limpiarSiHayNumeros(input) {
            var regex = /[0-9]/;  // Expresión regular para detectar números
            if (regex.test(input.value)) {
                input.value = "";  // Limpiar el contenido del campo
                //alert("No se permiten números.s");  // Opción: mostrar alerta al usuario
            }
        }

        // Agregar el evento 'input' a cada campo para validar al escribir
        document.getElementById("txtEscuela").addEventListener("input", function() { limpiarSiHayNumeros(this); });
        document.getElementById("txtEspecialidad").addEventListener("input", function() { limpiarSiHayNumeros(this); });
        document.getElementById("txtServiciosClin").addEventListener("input", function() { limpiarSiHayNumeros(this); });
        //document.getElementById("txtClinica").addEventListener("input", function() { limpiarSiHayNumeros(this); });
        //document.getElementById("txtConsultorio").addEventListener("input", function() { limpiarSiHayNumeros(this); });
        //document.getElementById("txtConsultorio2").addEventListener("input", function() { limpiarSiHayNumeros(this); });*/
    </script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const txtIntervConsul = document.getElementById('txtIntervConsul');
            const txtIntervConsul2 = document.getElementById('txtIntervConsul2');
        
            // Función para validar enteros y limpiar el campo si es necesario
            function validateIntegerInput(inputField) {
                inputField.addEventListener('input', function() {
                    // Remover cualquier carácter que no sea un número
                    this.value = this.value.replace(/[^0-9]/g, '');
        
                    // Si el valor está vacío o no es un número entero, limpiar el campo
                    if (this.value === '' || !Number.isInteger(Number(this.value))) {
                        this.value = ''; // Limpiar el campo
                    }
                });
            }
            // Validar ambos campos
            validateIntegerInput(txtIntervConsul);
            validateIntegerInput(txtIntervConsul2);
        });
    </script>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="{{ url_for ('static', filename='js/catalogos.js') }}"></script>
{% endblock %}


